#!/bin/sh

local_hook="$(git rev-parse --git-dir)/hooks/pre-push"
if [ -x "$local_hook" ]; then
    "$local_hook" || exit 1
fi

if git rev-parse @{u} >/dev/null 2>&1; then
    range="@{u}...HEAD"
else
    # no upstream â€” diff from the initial commit
    range="$(git rev-list --max-parents=0 HEAD)...HEAD"
fi

git diff --name-only "$range" | fmt --check
